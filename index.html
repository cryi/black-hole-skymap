<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Black Hole Iterative Skymap - WebGL</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes"/>
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
		
		<script type='text/javascript' src='/js/jquery-1.10.0.min.js'></script>
		<script type='text/javascript' src='/js/util.js'></script>
		<script type='text/javascript' src='/js/gl-matrix.2.1.0.min.js'></script>
		<script type='text/javascript' src='/js/webgl-debug.js'></script>
		<script type='text/javascript' src='/js/gl-util.js'></script>
		<script type='text/javascript' src='/js/mouse3d.js'></script>
		<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
		<script type='text/javascript' src='main.js'></script>
		
<script type='text/javascript'>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-17312646-1']);
_gaq.push(['_trackPageview']);
(function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

		<script id='cube-vsh' type='x-shader/x-vertex'>
attribute vec3 vertex;
varying vec3 vertexv;
uniform mat4 projMat;
const mat3 viewMatrixInv = mat3(
	0., 1., 0.,
	0., 0., -1.,
	-1., 0., 0.);
void main() {
	vertexv = viewMatrixInv * vertex;
	gl_Position = projMat * vec4(vertex, 1.);
}
		</script>
		<script id='cube-fsh' type='x-shader/x-fragment'>
precision mediump float;
varying vec3 vertexv;
uniform samplerCube skyTex;
uniform samplerCube lightVelTex;
const mat3 viewMatrix = mat3(
	0., 0., -1.,
	1., 0., 0., 
	0., -1., 0.);

uniform vec4 viewAngle;
vec3 qtransform( vec4 q, vec3 v ){ 
	return v + 2.0*cross(cross(v, q.xyz ) + q.w*v, q.xyz);
}
void main() {
	vec3 dir = textureCube(lightVelTex, vertexv).xyz * 2. - 1.;
	dir = qtransform(vec4(viewAngle.xyz, -viewAngle.w), viewMatrix * dir);
	gl_FragColor = textureCube(skyTex, dir);
	gl_FragColor.w = 1.; 
}
		</script>

		<style type='text/css'>

body {
	background-color:black;
	color:white;
}

a:link {
	cursor:pointer;
	color:#00FFFF;
}

a:visited {
	cursor:pointer;
	color:#00FFFF;
}

a:hover {
	cursor:pointer;
	color:#00FFFF;
}

a:active {
	cursor:pointer;
	color:#00FFFF;
}
	
		</style>
	</head>
	<body style='margin:0px; overflow:hidden'>
		<div id='panel' style='width:400; position:absolute; background-color:rgba(0,0,0,.5)'>
			Iteration d/dLambda: <input id='deltaLambda'/><br>
			<select id='objectTypes'></select><br>
			Object Distance (m): <input id='objectDist'/><br>
			<div id="Black_Hole_params">
				Black Hole Mass (kg): <input id='blackHoleMass'/><br>
			</div>
			<div id="Alcubierre_Warp_Drive_Bubble_params">
				Warp Bubble Thickness: <input id='warpBubbleThickness'/><br>
				Warp Bubble Velocity (c): <input id='warpBubbleVelocity'/><br>
				Warp Bubble Radius: <input id='warpBubbleRadius'/><br>
			</div>
			<input type='radio' group='1' onclick='location.href="testcube.html"'>Test Cube</input><br>
			<input type='radio' group='1' checked>Software update</input><br>
			<input type='radio' group='1' onclick='location.href="index.fbo.html"'>FBO update</input><br>
			<button id='reset'>Reset</button><br>
			<!-- button id='pause'>Pause</button><br -->
			<!-- Update: <progress id='update-progress' max='100' value='0'></progress><br> -->
	
			<!-- still working on this 
			<br>
			<h3>Light and Geodesics</h3>
			Light travels in a straight line.  Turns out the spacetime that light travels through is curved.
			So how does one find the path that light travels through spacetime?  Enter geodesics.
			Geodesics calculate the path that a straight line takes over an arbitrary surface.
			The general equation is described as:<br>
			\( x^\mu = -\Gamma^\mu_\alpha_\beta x^\alpha x^\beta \)<br>
			Where \( \Gamma^\mu_\alpha_\beta \) is our Christoffel Symbol of the Second (?) Kind.
			This gives us a relation between the acceleration and the velocity of our test particle travelling across the geodesic.
			It turns out the coefficients of the velocity (stored in \( \Gamma^\mu_\alpha_\beta \) ) tend to be based on the position as well.
			In the end we get a formula for computing the acceleration based on the state of the particle.
			-->
		</div>
		<div id='webglfail' style='display:none'>
			Sorry, your browser does not support WebGL<br>
			Try one of these other, better browsers:<br>
			<a href='http://www.google.com/chrome'>Chrome</a><br>
			<a href='http://www.mozilla.org/firefox'>Firefox</a><br>
			<a href='http://www.apple.com/safari'>Safari</a><br>
			<b>Opera Users:</b><br>
			Enter "opera:config" in the address bar.<br>
			In the "User Prefs" section set both "Enable Hardware Acceleration" and "Enable WebGL" to "1" and then click "Save".<br>
			It is still buggy.<br>
			<b>IE Users:</b><br>
			Sorry guys, IE doesn't plan to support WebGL.<br>
			Consider using a more <a href='http://www.w3schools.com/browsers/browsers_stats.asp'>standard compliant</a> browser.<br>
		</div>
	</body>
</html>
