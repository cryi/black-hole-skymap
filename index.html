<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Black Hole Iterative Skymap - WebGL</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes"/>
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

		<link rel='stylesheet' type='text/css' href='style.css'/>
		<script type='text/javascript' src='/js/jquery-1.10.0.min.js'></script>
		<script type="text/javascript" src="/js/purl.js"></script>
		<script type='text/javascript' src='/js/util.js'></script>
		<script type='text/javascript' src='/js/gl-matrix.2.2.0.min.js'></script>
		<script type='text/javascript' src='/js/gl-util.js'></script>
		<script type='text/javascript' src='/js/gl-util-unitquad.js'></script>
		<script type='text/javascript' src='/js/gl-util-kernel.js'></script>
		<script type='text/javascript' src='/js/mouse3d.js'></script>
		<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
		<script type='text/javascript' src='renderer.testcube.js'></script>
		<script type='text/javascript' src='renderer.sw.js'></script>
		<script type='text/javascript' src='renderer.fbo.js'></script>
		<script type='text/javascript' src='main.js'></script>
		
<script type='text/javascript'>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-17312646-1']);
_gaq.push(['_trackPageview']);
(function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

	</head>
	<body style='margin:0px; overflow:hidden'>
		<div id='panel' style='overflow:scroll; min-width:350px; width:25%; height:100%; z-index:1; position:absolute; background-color:rgba(0,0,0,.5)'>
			Iteration d/dLambda: <input id='deltaLambda'/><br>
			<select id='objectTypes'></select><br>
			Object Distance (m): <input id='objectDist'/><br>
			<div id="Black_Hole_params">
				Black Hole Mass (kg): <input id='blackHoleMass'/><br>
			</div>
			<div id="Alcubierre_Warp_Drive_Bubble_params">
				Warp Bubble Thickness: <input id='warpBubbleThickness'/><br>
				Warp Bubble Velocity (c): <input id='warpBubbleVelocity'/><br>
				Warp Bubble Radius: <input id='warpBubbleRadius'/><br>
			</div>
			<input type='radio' group='1' id='GeodesicTestCubeRenderer'>Original Background</input><br>
			<input type='radio' group='1' id='GeodesicSWRenderer'>Software update</input><br>
			<input type='radio' group='1' id='GeodesicFBORenderer'>FBO update</input><br>
			<button id='reset'>Reset</button><br>
			<!-- button id='pause'>Pause</button><br -->
			<!-- Update: <progress id='update-progress' max='100' value='0'></progress><br> -->
			
			<br>
			<h3>Light and Geodesics</h3>
			Light travels in a straight line.  Let's represent the position of a particle of light as \(x^\mu\), for \(\mu\) running over indexes 0, 1, 2, 3.
			\(x^0 = t\) will represent the position in time of the particle. \(x^i\), for i running 1 through 3, will represent the coordinate in 3D space of the particle.
			\(x^1\) will represent the x coordinate, \(x^2 = y\), and \(x^3 = z\).<br>
			<br>
			From a stationary observer a light particle appears to travel through time.  Let \(\tau\) represent the observer's position in time.
			The change in the light particle's position (in space and time) with respect to the change in the observer's time (the velocity in the observer's rest frame) can be represented as \({d \over {d\tau}} x^\mu\), or \({\dot x}^\mu\) for short.
			This appearance of velocity is only present to the observer, of course.
			To the particle of light in its own rest frame, it is simultaneously existing in all locations.
			For more on that check out the page on <a href='/time-dilation'>time dilation</a>.<br>
			<br>
			Turns out the spacetime that light travels through is not flat, but curved.
			Curved geometry is described in terms of its line element, \(ds^s = g_{\mu\nu} dx^\mu dx^\nu \), for \(g_{\mu\nu}\) the metric tensor.<br>
			<br>
			So how does one find the coordinates of path that light travels through a curved spacetime?  Enter the world of geodesics.
			Geodesics calculate the path that a straight line takes over an arbitrarily curved surface.
			The geodesic equation is described as
			\( {\ddot x}^\mu + {\Gamma^\mu}_{\alpha \beta} {\dot x}^\alpha {\dot x}^\beta = 0 \)
			where \( {\Gamma^\mu}_{\alpha \beta} \) is the Christoffel Symbol of the Second Kind.<br>
			<br>
			The Christoffel Symbol of the Second Kind can be defined as \( {\Gamma^\mu}_{\alpha \beta} = g^{\mu\nu} \Gamma_{\nu \alpha \beta} \),
			for \(g^{\mu\nu}\) the inverse of the metric tensor and for \( {\Gamma_{\nu \alpha \beta}} \) the Christoffel Symbol of the First Kind.
			The Christoffel Symbol of the First Kind is then defined as \( \Gamma_{\alpha \beta \gamma} = {1 \over 2} (g_{\alpha \beta, \gamma} + g_{\alpha \gamma, \beta} - g_{\beta \gamma, \alpha})\)
			for comma derivative shorthand \(g_{\alpha \beta, \gamma} = {d \over {d {x^\gamma}}} g_{\alpha \beta}\).<br>
			<br>
			The geodesic equation gives us a relation between the first and second derivatives of the coordinates our test particle travelling along the geodesic.
			It turns out the coefficients of the relation stored in \( {\Gamma^\mu}_{\alpha \beta} \) tend to be based on the particle position \(x^\mu\) as well.
			In the end we get a formula for computing \({\ddot x}^\mu\) based on the \(x^\mu\) and \({\dot x}^\mu\).<br>
			<br>
			<h3>Implementation</h3>
			Once we have these relations we can approximate them by simulating the position and velocity of light particles at arbitrary samples on the screen. 
			The positions and velocities are updated using your favorite numeric integration method with the following equations:
\( {d \over {d\tau}} \left[ \matrix { x^\mu \\ {\dot x}^\mu } \right]
= \left[ \matrix{ {\dot x}^\mu \\ {\ddot x}^\mu } \right]
= \left[ \matrix{ {\dot x}^\mu \\ -{\Gamma^\mu}_{\alpha \beta} {\dot x}^\alpha {\dot x}^\beta } \right]
\).
			<h3>Schwarzschild Geodesic</h3>
			The Schwarzschild metric describes the curvature of spacetime around a spherical object.
			The metric is given as \( {ds}^2 = -(1 - {2 M \over r}) {dt}^2 + (1 - {2 M \over r})^{-1} ({dx}^2 + {dy}^2 + {dz}^2) \)
			for M the mass of the object.<br>
			<h3>Kerr Geodesic</h3>
			The Kerr metric describes the curvature of spacetime around a spherical rotating object.
			The metric is given as \( {ds}^2 = -{dt}^2 + {dx}^2 + {dy}^2 + {dz}^2 + {2mr^3 \over {r^4 + a^2 z^2}} (dt + {{rx+ay}\over{a^2+r^2}} dx + {{ry-ax}\over{a^2+r^2}} dy + {z \over r} dz)^2 \)
			for the mass \(m\), angular acceleration \(a\), and \(r\) is defined by \( x^2 + y^2 + z^2 = r^2 + a^2 (1 - {z^2 \over r^2}) \).<br>
			<h3>Alcubierre Warp Bubble Geodesic</h3>
			The Alcubierre warp bubble metric describes the curvature of spacetime around a warp bubble.
			The metric is given as \( {ds}^2 = ({v_s}^2 f(r_s(t))^2 - 1) {dt}^2 - 2 v_s f(r_s) {dx} {dt} + {dx}^2 + {dy}^2 + {dz}^2 \)
			for \( f(r_s) = (tanh(\sigma(r_s + R)) - tanh(\sigma(r_s - R))) / (2 tanh(\sigma R)) \),
			\(r_s = \sqrt{(x - x_s)^2 + y^2 + z^2} \),
			\(x_s\) the warp bubble distance,
			\(v_s\) the warp bubble velocity,
			R the warp bubble radius,
			and \( \sigma \) the warp bubble thickness.<br>
		</div>
		<div id='webglfail' style='display:none'>
			Sorry, your browser does not support WebGL<br>
			Try one of these other, better browsers:<br>
			<a href='http://www.google.com/chrome'>Chrome</a><br>
			<a href='http://www.mozilla.org/firefox'>Firefox</a><br>
			<a href='http://www.apple.com/safari'>Safari</a><br>
			<b>Opera Users:</b><br>
			Enter "opera:config" in the address bar.<br>
			In the "User Prefs" section set both "Enable Hardware Acceleration" and "Enable WebGL" to "1" and then click "Save".<br>
			It is still buggy.<br>
			<b>IE Users:</b><br>
			Sorry guys, IE doesn't plan to support WebGL.<br>
			Consider using a more <a href='http://www.w3schools.com/browsers/browsers_stats.asp'>standard compliant</a> browser.<br>
		</div>
	</body>
</html>
